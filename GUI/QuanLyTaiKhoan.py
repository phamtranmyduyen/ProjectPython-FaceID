# Form implementation generated from reading ui file 'ui/QuanLyTaiKhoan.ui'
#
# Created by: PyQt6 UI code generator 6.4.2
#
# WARNING: Any manual changes made to this file will be lost when pyuic6 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt6 import QtCore, QtGui, QtWidgets
from PyQt6.QtWidgets import QMessageBox
from datetime import datetime
from check_error import check_error
import os
import sys
SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))
sys.path.append(os.path.dirname(SCRIPT_DIR))
from BUS.ChucNangBUS import ChucNangBUS
from DAL.ChucNang import ChucNang
from BUS.QuyenBUS import QuyenBUS
from DAL.Quyen import Quyen
from BUS.TaiKhoanBUS import TaiKhoanBUS
from DAL.TaiKhoan import TaiKhoan
from BUS.Quyen_ChucNangBUS import Quyen_ChucNangBUS
from DAL.Quyen_ChucNang import Quyen_ChucNang
import DialogListChucNang
class UI_QuanLyTaiKhoan(object):
        macn = ""
        maquyen = ""
        mataikhoan = ""
        def setupUi(self, MainWindow):
                MainWindow.setObjectName("MainWindow")
                MainWindow.resize(800, 590)
                self.centralwidget = QtWidgets.QWidget(parent=MainWindow)
                self.centralwidget.setObjectName("centralwidget")
                self.frame_6 = QtWidgets.QFrame(parent=self.centralwidget)
                self.frame_6.setGeometry(QtCore.QRect(0, 0, 801, 31))
                self.frame_6.setFrameShape(QtWidgets.QFrame.Shape.StyledPanel)
                self.frame_6.setFrameShadow(QtWidgets.QFrame.Shadow.Raised)
                self.frame_6.setObjectName("frame_6")
                self.btnClose = QtWidgets.QPushButton(parent=self.frame_6)
                self.btnClose.setGeometry(QtCore.QRect(777, 4, 24, 24))
                self.btnClose.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnClose.setText("")
                icon = QtGui.QIcon()
                icon.addPixmap(QtGui.QPixmap("ui\\../image/icon/close_50px.png"), QtGui.QIcon.Mode.Normal, QtGui.QIcon.State.Off)
                self.btnClose.setIcon(icon)
                self.btnClose.setIconSize(QtCore.QSize(20, 20))
                self.btnClose.setObjectName("btnClose")
                self.btnMinimize = QtWidgets.QPushButton(parent=self.frame_6)
                self.btnMinimize.setGeometry(QtCore.QRect(752, 4, 24, 24))
                self.btnMinimize.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnMinimize.setText("")
                icon1 = QtGui.QIcon()
                icon1.addPixmap(QtGui.QPixmap("ui\\../image/icon/subtract_50px.png"), QtGui.QIcon.Mode.Normal, QtGui.QIcon.State.Off)
                self.btnMinimize.setIcon(icon1)
                self.btnMinimize.setIconSize(QtCore.QSize(20, 20))
                self.btnMinimize.setObjectName("btnMinimize")
                self.label_20 = QtWidgets.QLabel(parent=self.frame_6)
                self.label_20.setGeometry(QtCore.QRect(10, 2, 201, 26))
                font = QtGui.QFont()
                font.setPointSize(9)
                font.setStyleStrategy(QtGui.QFont.StyleStrategy.NoAntialias)
                self.label_20.setFont(font)
                self.label_20.setAcceptDrops(False)
                self.label_20.setToolTip("")
                self.label_20.setAutoFillBackground(False)
                self.label_20.setFrameShape(QtWidgets.QFrame.Shape.NoFrame)
                self.label_20.setFrameShadow(QtWidgets.QFrame.Shadow.Plain)
                self.label_20.setTextFormat(QtCore.Qt.TextFormat.AutoText)
                self.label_20.setScaledContents(False)
                self.label_20.setWordWrap(False)
                self.label_20.setIndent(-1)
                self.label_20.setTextInteractionFlags(QtCore.Qt.TextInteractionFlag.LinksAccessibleByMouse)
                self.label_20.setObjectName("label_20")
                self.frmHeader = QtWidgets.QFrame(parent=self.centralwidget)
                self.frmHeader.setGeometry(QtCore.QRect(0, 30, 851, 51))
                self.frmHeader.setAccessibleName("")
                self.frmHeader.setLayoutDirection(QtCore.Qt.LayoutDirection.LeftToRight)
                self.frmHeader.setFrameShape(QtWidgets.QFrame.Shape.StyledPanel)
                self.frmHeader.setFrameShadow(QtWidgets.QFrame.Shadow.Raised)
                self.frmHeader.setLineWidth(1)
                self.frmHeader.setObjectName("frmHeader")
                self.label_3 = QtWidgets.QLabel(parent=self.frmHeader)
                self.label_3.setGeometry(QtCore.QRect(0, 0, 801, 51))
                font = QtGui.QFont()
                font.setPointSize(14)
                font.setBold(True)
                font.setWeight(75)
                self.label_3.setFont(font)
                self.label_3.setStyleSheet("#label_3\n"
        "{\n"
        "    font-weight:bold;\n"
        "}")
                self.label_3.setAlignment(QtCore.Qt.AlignmentFlag.AlignCenter)
                self.label_3.setObjectName("label_3")
                self.btnBack = QtWidgets.QPushButton(parent=self.frmHeader)
                self.btnBack.setGeometry(QtCore.QRect(730, 12, 61, 23))
                self.btnBack.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnBack.setObjectName("btnBack")
                self.label_2 = QtWidgets.QLabel(parent=self.frmHeader)
                self.label_2.setGeometry(QtCore.QRect(50, 10, 91, 16))
                font = QtGui.QFont()
                font.setPointSize(10)
                font.setStyleStrategy(QtGui.QFont.StyleStrategy.NoAntialias)
                self.label_2.setFont(font)
                self.label_2.setAcceptDrops(False)
                self.label_2.setToolTip("")
                self.label_2.setAutoFillBackground(False)
                self.label_2.setFrameShape(QtWidgets.QFrame.Shape.NoFrame)
                self.label_2.setFrameShadow(QtWidgets.QFrame.Shadow.Plain)
                self.label_2.setTextFormat(QtCore.Qt.TextFormat.AutoText)
                self.label_2.setScaledContents(False)
                self.label_2.setWordWrap(False)
                self.label_2.setIndent(-1)
                self.label_2.setTextInteractionFlags(QtCore.Qt.TextInteractionFlag.LinksAccessibleByMouse)
                self.label_2.setObjectName("label_2")
                self.label_4 = QtWidgets.QLabel(parent=self.frmHeader)
                self.label_4.setGeometry(QtCore.QRect(50, 30, 91, 16))
                font = QtGui.QFont()
                font.setPointSize(10)
                self.label_4.setFont(font)
                self.label_4.setObjectName("label_4")
                self.btnDark = QtWidgets.QPushButton(parent=self.frmHeader)
                self.btnDark.setGeometry(QtCore.QRect(680, 8, 31, 31))
                self.btnDark.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnDark.setText("")
                icon2 = QtGui.QIcon()
                icon2.addPixmap(QtGui.QPixmap("ui\\../image/icon/moon_symbol_50px.png"), QtGui.QIcon.Mode.Normal, QtGui.QIcon.State.Off)
                self.btnDark.setIcon(icon2)
                self.btnDark.setIconSize(QtCore.QSize(20, 20))
                self.btnDark.setObjectName("btnDark")
                self.btnTime = QtWidgets.QPushButton(parent=self.frmHeader)
                self.btnTime.setGeometry(QtCore.QRect(10, 10, 31, 31))
                self.btnTime.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnTime.setStyleSheet("#btnTime\n"
        "{\n"
        "background-color: transparent;\n"
        "}")
                self.btnTime.setText("")
                icon3 = QtGui.QIcon()
                icon3.addPixmap(QtGui.QPixmap("ui\\../image/icon/time_50px.png"), QtGui.QIcon.Mode.Normal, QtGui.QIcon.State.Off)
                self.btnTime.setIcon(icon3)
                self.btnTime.setIconSize(QtCore.QSize(20, 20))
                self.btnTime.setObjectName("btnTime")
                self.label_3.raise_()
                self.btnBack.raise_()
                self.label_4.raise_()
                self.label_2.raise_()
                self.btnDark.raise_()
                self.btnTime.raise_()
                self.layoutWidget = QtWidgets.QWidget(parent=self.centralwidget)
                self.layoutWidget.setGeometry(QtCore.QRect(20, 100, 761, 471))
                self.layoutWidget.setObjectName("layoutWidget")
                self.horizontalLayout = QtWidgets.QHBoxLayout(self.layoutWidget)
                self.horizontalLayout.setContentsMargins(0, 0, 0, 0)
                self.horizontalLayout.setObjectName("horizontalLayout")
                self.frmChangeSV = QtWidgets.QFrame(parent=self.layoutWidget)
                self.frmChangeSV.setStyleSheet("#frmChangeSV\n"
        "{\n"
        "    border-width: 2;\n"
        "    border-radius: 5;\n"
        "     border-style: solid;\n"
        "      border-color: #457fca;\n"
        "}")
                self.frmChangeSV.setFrameShape(QtWidgets.QFrame.Shape.Box)
                self.frmChangeSV.setFrameShadow(QtWidgets.QFrame.Shadow.Plain)
                self.frmChangeSV.setLineWidth(2)
                self.frmChangeSV.setMidLineWidth(0)
                self.frmChangeSV.setObjectName("frmChangeSV")
                self.horizontalLayoutWidget = QtWidgets.QWidget(parent=self.frmChangeSV)
                self.horizontalLayoutWidget.setGeometry(QtCore.QRect(20, 420, 341, 41))
                self.horizontalLayoutWidget.setObjectName("horizontalLayoutWidget")
                self.horizontalLayout_2 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget)
                self.horizontalLayout_2.setContentsMargins(0, 0, 0, 0)
                self.horizontalLayout_2.setObjectName("horizontalLayout_2")
                self.btnThemTaiKhoan = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget)
                self.btnThemTaiKhoan.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnThemTaiKhoan.setStyleSheet("#btnThemTaiKhoan{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnThemTaiKhoan:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnThemTaiKhoan.setObjectName("btnThemTaiKhoan")
                self.btnThemTaiKhoan.clicked.connect(self.addTaiKhoan)
                self.horizontalLayout_2.addWidget(self.btnThemTaiKhoan)
                self.btnSuaTaiKhoan = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget)
                self.btnSuaTaiKhoan.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnSuaTaiKhoan.setStyleSheet("#btnSuaTaiKhoan{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnSuaTaiKhoan:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnSuaTaiKhoan.setObjectName("btnSuaTaiKhoan")
                self.btnSuaTaiKhoan.clicked.connect(self.updateTaiKhoan)
                self.horizontalLayout_2.addWidget(self.btnSuaTaiKhoan)
                self.btnXoaTaiKhoan = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget)
                self.btnXoaTaiKhoan.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnXoaTaiKhoan.setStyleSheet("#btnXoaTaiKhoan{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnXoaTaiKhoan:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnXoaTaiKhoan.setObjectName("btnXoaTaiKhoan")
                self.btnXoaTaiKhoan.clicked.connect(self.deleteTaiKhoan)
                self.horizontalLayout_2.addWidget(self.btnXoaTaiKhoan)
                self.btnLamMoiTaiKhoan = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget)
                self.btnLamMoiTaiKhoan.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnLamMoiTaiKhoan.setStyleSheet("#btnLamMoiTaiKhoan{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnLamMoiTaiKhoan:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnLamMoiTaiKhoan.setObjectName("btnLamMoiTaiKhoan")
                self.btnLamMoiTaiKhoan.clicked.connect(self.clearTaiKhoan)
                self.horizontalLayout_2.addWidget(self.btnLamMoiTaiKhoan)
                self.tbwTaiKhoan = QtWidgets.QTableWidget(parent=self.frmChangeSV)
                self.tbwTaiKhoan.setGeometry(QtCore.QRect(20, 200, 341, 211))
                self.tbwTaiKhoan.setObjectName("tbwTaiKhoan")
                self.tbwTaiKhoan.setColumnCount(3)
                self.tbwTaiKhoan.setRowCount(0)
                item = QtWidgets.QTableWidgetItem()
                self.tbwTaiKhoan.setHorizontalHeaderItem(0, item)
                item = QtWidgets.QTableWidgetItem()
                self.tbwTaiKhoan.setHorizontalHeaderItem(1, item)
                item = QtWidgets.QTableWidgetItem()
                self.tbwTaiKhoan.setHorizontalHeaderItem(2, item)
                self.tbwTaiKhoan.setEditTriggers(QtWidgets.QTableWidget.EditTrigger.NoEditTriggers)
                self.tbwTaiKhoan.itemClicked.connect(self.getDataRowTaiKhoan)  
                self.label_14 = QtWidgets.QLabel(parent=self.frmChangeSV)
                self.label_14.setGeometry(QtCore.QRect(20, 80, 51, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_14.setFont(font)
                self.label_14.setAlignment(QtCore.Qt.AlignmentFlag.AlignBottom|QtCore.Qt.AlignmentFlag.AlignLeading|QtCore.Qt.AlignmentFlag.AlignLeft)
                self.label_14.setObjectName("label_14")
                self.label_10 = QtWidgets.QLabel(parent=self.frmChangeSV)
                self.label_10.setGeometry(QtCore.QRect(20, 40, 51, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_10.setFont(font)
                self.label_10.setAlignment(QtCore.Qt.AlignmentFlag.AlignBottom|QtCore.Qt.AlignmentFlag.AlignLeading|QtCore.Qt.AlignmentFlag.AlignLeft)
                self.label_10.setObjectName("label_10")
                self.txtEmail = QtWidgets.QLineEdit(parent=self.frmChangeSV)
                self.txtEmail.setGeometry(QtCore.QRect(80, 40, 261, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.txtEmail.setFont(font)
                self.txtEmail.setText("")
                self.txtEmail.setObjectName("txtEmail")
                self.cmbQuyen = QtWidgets.QComboBox(parent=self.frmChangeSV)
                self.cmbQuyen.setGeometry(QtCore.QRect(80, 80, 91, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.cmbQuyen.setFont(font)
                self.cmbQuyen.setObjectName("cmbQuyen")
                self.loadListCmbQuyen()
                self.label_8 = QtWidgets.QLabel(parent=self.frmChangeSV)
                self.label_8.setGeometry(QtCore.QRect(20, 10, 141, 21))
                font = QtGui.QFont()
                font.setPointSize(10)
                font.setBold(True)
                font.setWeight(75)
                self.label_8.setFont(font)
                self.label_8.setStyleSheet("#label_8\n"
        "{\n"
        "font-weight: bold;\n"
        "}")
                self.label_8.setObjectName("label_8")
                self.frame_5 = QtWidgets.QFrame(parent=self.frmChangeSV)
                self.frame_5.setGeometry(QtCore.QRect(20, 120, 341, 71))
                self.frame_5.setFrameShape(QtWidgets.QFrame.Shape.Box)
                self.frame_5.setFrameShadow(QtWidgets.QFrame.Shadow.Sunken)
                self.frame_5.setObjectName("frame_5")
                self.label_23 = QtWidgets.QLabel(parent=self.frame_5)
                self.label_23.setGeometry(QtCore.QRect(10, 14, 131, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_23.setFont(font)
                self.label_23.setObjectName("label_23")
                self.label_24 = QtWidgets.QLabel(parent=self.frame_5)
                self.label_24.setGeometry(QtCore.QRect(10, 40, 81, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_24.setFont(font)
                self.label_24.setAlignment(QtCore.Qt.AlignmentFlag.AlignBottom|QtCore.Qt.AlignmentFlag.AlignLeading|QtCore.Qt.AlignmentFlag.AlignLeft)
                self.label_24.setObjectName("label_24")
                self.cmbOptionFindTaiKhoan = QtWidgets.QComboBox(parent=self.frame_5)
                self.cmbOptionFindTaiKhoan.setGeometry(QtCore.QRect(90, 40, 91, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.cmbOptionFindTaiKhoan.setFont(font)
                self.cmbOptionFindTaiKhoan.setObjectName("cmbOptionFindTaiKhoan")
                self.cmbOptionFindTaiKhoan.addItem("Mã tài khoản", "mataikhoan")
                self.cmbOptionFindTaiKhoan.addItem("Email", "email")
                self.cmbOptionFindTaiKhoan.currentIndexChanged.connect(self.findTaiKhoan)
                self.txtFindTaiKhoan = QtWidgets.QLineEdit(parent=self.frame_5)
                self.txtFindTaiKhoan.setGeometry(QtCore.QRect(190, 40, 141, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.txtFindTaiKhoan.setFont(font)
                self.txtFindTaiKhoan.setText("")
                self.txtFindTaiKhoan.setObjectName("txtFindTaiKhoan")
                self.txtFindTaiKhoan.textChanged.connect(self.findTaiKhoan)
                self.horizontalLayout.addWidget(self.frmChangeSV)
                self.frmMain_2 = QtWidgets.QFrame(parent=self.layoutWidget)
                self.frmMain_2.setStyleSheet("#frmMain\n"
        "{\n"
        "    border-width: 1;\n"
        "    border-radius: 5;\n"
        "     border-style: solid;\n"
        "      border-color: #457fca;\n"
        "}")
                self.frmMain_2.setFrameShape(QtWidgets.QFrame.Shape.NoFrame)
                self.frmMain_2.setFrameShadow(QtWidgets.QFrame.Shadow.Plain)
                self.frmMain_2.setLineWidth(2)
                self.frmMain_2.setObjectName("frmMain_2")
                self.verticalLayout = QtWidgets.QVBoxLayout(self.frmMain_2)
                self.verticalLayout.setContentsMargins(0, 0, 0, 0)
                self.verticalLayout.setObjectName("verticalLayout")
                self.frmInfoSV = QtWidgets.QFrame(parent=self.frmMain_2)
                self.frmInfoSV.setStyleSheet("#frmInfoSV\n"
        "{\n"
        "    border-width: 2;\n"
        "    border-radius: 5;\n"
        "     border-style: solid;\n"
        "      border-color: #457fca;\n"
        "}")
                self.frmInfoSV.setFrameShape(QtWidgets.QFrame.Shape.Box)
                self.frmInfoSV.setFrameShadow(QtWidgets.QFrame.Shadow.Plain)
                self.frmInfoSV.setLineWidth(2)
                self.frmInfoSV.setObjectName("frmInfoSV")
                self.tbwQuyen = QtWidgets.QTableWidget(parent=self.frmInfoSV)
                self.tbwQuyen.setGeometry(QtCore.QRect(190, 90, 181, 131))
                self.tbwQuyen.setObjectName("tbwQuyen")
                self.tbwQuyen.setColumnCount(2)
                self.tbwQuyen.setRowCount(0)
                item = QtWidgets.QTableWidgetItem()
                self.tbwQuyen.setHorizontalHeaderItem(0, item)
                item = QtWidgets.QTableWidgetItem()
                self.tbwQuyen.setHorizontalHeaderItem(1, item)
                self.tbwQuyen.setEditTriggers(QtWidgets.QTableWidget.EditTrigger.NoEditTriggers)
                self.tbwQuyen.itemClicked.connect(self.getDataRowQuyen)   
                self.frame_7 = QtWidgets.QFrame(parent=self.frmInfoSV)
                self.frame_7.setGeometry(QtCore.QRect(10, 40, 361, 41))
                self.frame_7.setFrameShape(QtWidgets.QFrame.Shape.Box)
                self.frame_7.setFrameShadow(QtWidgets.QFrame.Shadow.Sunken)
                self.frame_7.setObjectName("frame_7")
                self.label_25 = QtWidgets.QLabel(parent=self.frame_7)
                self.label_25.setGeometry(QtCore.QRect(10, 10, 81, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_25.setFont(font)
                self.label_25.setAlignment(QtCore.Qt.AlignmentFlag.AlignBottom|QtCore.Qt.AlignmentFlag.AlignLeading|QtCore.Qt.AlignmentFlag.AlignLeft)
                self.label_25.setObjectName("label_25")
                self.cmbOptionFindQuyen = QtWidgets.QComboBox(parent=self.frame_7)
                self.cmbOptionFindQuyen.setGeometry(QtCore.QRect(90, 10, 101, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.cmbOptionFindQuyen.setFont(font)
                self.cmbOptionFindQuyen.setObjectName("cmbOptionFindQuyen")
                self.cmbOptionFindQuyen.addItem("Mã quyền", "maquyen")
                self.cmbOptionFindQuyen.addItem("Tên quyền", "tenquyen")
                self.cmbOptionFindQuyen.currentIndexChanged.connect(self.findQuyen)
                self.txtFindQuyen = QtWidgets.QLineEdit(parent=self.frame_7)
                self.txtFindQuyen.setGeometry(QtCore.QRect(200, 10, 151, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.txtFindQuyen.setFont(font)
                self.txtFindQuyen.setText("")
                self.txtFindQuyen.setObjectName("txtFindQuyen")
                self.txtFindQuyen.textChanged.connect(self.findQuyen)
                self.label_26 = QtWidgets.QLabel(parent=self.frmInfoSV)
                self.label_26.setGeometry(QtCore.QRect(110, 5, 181, 30))
                font = QtGui.QFont()
                font.setPointSize(14)
                font.setBold(True)
                font.setWeight(75)
                self.label_26.setFont(font)
                self.label_26.setStyleSheet("#label_26\n"
        "{\n"
        "    font-weight:bold;\n"
        "}")
                self.label_26.setAlignment(QtCore.Qt.AlignmentFlag.AlignCenter)
                self.label_26.setObjectName("label_26")
                self.label_27 = QtWidgets.QLabel(parent=self.frmInfoSV)
                self.label_27.setGeometry(QtCore.QRect(20, 90, 61, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_27.setFont(font)
                self.label_27.setAlignment(QtCore.Qt.AlignmentFlag.AlignBottom|QtCore.Qt.AlignmentFlag.AlignLeading|QtCore.Qt.AlignmentFlag.AlignLeft)
                self.label_27.setObjectName("label_27")
                self.txtTenQuyen = QtWidgets.QLineEdit(parent=self.frmInfoSV)
                self.txtTenQuyen.setGeometry(QtCore.QRect(80, 90, 101, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.txtTenQuyen.setFont(font)
                self.txtTenQuyen.setText("")
                self.txtTenQuyen.setObjectName("txtTenQuyen")
                self.horizontalLayoutWidget_6 = QtWidgets.QWidget(parent=self.frmInfoSV)
                self.horizontalLayoutWidget_6.setGeometry(QtCore.QRect(20, 160, 161, 31))
                self.horizontalLayoutWidget_6.setObjectName("horizontalLayoutWidget_6")
                self.horizontalLayout_7 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_6)
                self.horizontalLayout_7.setContentsMargins(0, 0, 0, 0)
                self.horizontalLayout_7.setObjectName("horizontalLayout_7")
                self.btnThemQuyen = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_6)
                self.btnThemQuyen.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnThemQuyen.setStyleSheet("#btnThemQuyen{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnThemQuyen:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnThemQuyen.setObjectName("btnThemQuyen")
                self.btnThemQuyen.clicked.connect(self.addQuyen)
                self.horizontalLayout_7.addWidget(self.btnThemQuyen)
                self.btnSuaQuyen = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_6)
                self.btnSuaQuyen.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnSuaQuyen.setStyleSheet("#btnSuaQuyen{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnSuaQuyen:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnSuaQuyen.setObjectName("btnSuaQuyen")
                self.btnSuaQuyen.clicked.connect(self.updateQuyen)
                self.horizontalLayout_7.addWidget(self.btnSuaQuyen)
                self.horizontalLayoutWidget_7 = QtWidgets.QWidget(parent=self.frmInfoSV)
                self.horizontalLayoutWidget_7.setGeometry(QtCore.QRect(20, 190, 161, 31))
                self.horizontalLayoutWidget_7.setObjectName("horizontalLayoutWidget_7")
                self.horizontalLayout_8 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_7)
                self.horizontalLayout_8.setContentsMargins(0, 0, 0, 0)
                self.horizontalLayout_8.setObjectName("horizontalLayout_8")
                self.btnXoaQuyen = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_7)
                self.btnXoaQuyen.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnXoaQuyen.setStyleSheet("#btnXoaQuyen{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnXoaQuyen:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnXoaQuyen.setObjectName("btnXoaQuyen")
                self.btnXoaQuyen.clicked.connect(self.deleteQuyen)
                self.horizontalLayout_8.addWidget(self.btnXoaQuyen)
                self.btnLamMoiQuyen = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_7)
                self.btnLamMoiQuyen.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnLamMoiQuyen.setStyleSheet("#btnLamMoiQuyen{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnLamMoiQuyen:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnLamMoiQuyen.setObjectName("btnLamMoiQuyen")
                self.btnLamMoiQuyen.clicked.connect(self.clearQuyen)
                self.horizontalLayout_8.addWidget(self.btnLamMoiQuyen)
                self.btnChonChucNang = QtWidgets.QPushButton(parent=self.frmInfoSV)
                self.btnChonChucNang.setGeometry(QtCore.QRect(50, 123, 101, 24))
                self.btnChonChucNang.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnChonChucNang.setStyleSheet("#btnChonChucNang{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnChonChucNang:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnChonChucNang.setObjectName("btnChonChucNang")
                self.btnChonChucNang.clicked.connect(lambda: self.openDialogListChucNang(self.maquyen))
                self.verticalLayout.addWidget(self.frmInfoSV)
                self.frmClass = QtWidgets.QFrame(parent=self.frmMain_2)
                self.frmClass.setStyleSheet("#frmClass\n"
        "{\n"
        "    border-width: 2;\n"
        "    border-radius: 5;\n"
        "     border-style: solid;\n"
        "      border-color: #457fca;\n"
        "}")
                self.frmClass.setFrameShape(QtWidgets.QFrame.Shape.Box)
                self.frmClass.setFrameShadow(QtWidgets.QFrame.Shadow.Plain)
                self.frmClass.setLineWidth(2)
                self.frmClass.setObjectName("frmClass")
                self.label_19 = QtWidgets.QLabel(parent=self.frmClass)
                self.label_19.setGeometry(QtCore.QRect(110, 5, 181, 30))
                font = QtGui.QFont()
                font.setPointSize(14)
                font.setBold(True)
                font.setWeight(75)
                self.label_19.setFont(font)
                self.label_19.setStyleSheet("#label_19\n"
        "{\n"
        "    font-weight:bold;\n"
        "}")
                self.label_19.setAlignment(QtCore.Qt.AlignmentFlag.AlignCenter)
                self.label_19.setObjectName("label_19")
                self.frame_4 = QtWidgets.QFrame(parent=self.frmClass)
                self.frame_4.setGeometry(QtCore.QRect(10, 40, 361, 41))
                self.frame_4.setFrameShape(QtWidgets.QFrame.Shape.Box)
                self.frame_4.setFrameShadow(QtWidgets.QFrame.Shadow.Sunken)
                self.frame_4.setObjectName("frame_4")
                self.label_21 = QtWidgets.QLabel(parent=self.frame_4)
                self.label_21.setGeometry(QtCore.QRect(10, 10, 81, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_21.setFont(font)
                self.label_21.setAlignment(QtCore.Qt.AlignmentFlag.AlignBottom|QtCore.Qt.AlignmentFlag.AlignLeading|QtCore.Qt.AlignmentFlag.AlignLeft)
                self.label_21.setObjectName("label_21")
                self.cmbOptionFindChucNang = QtWidgets.QComboBox(parent=self.frame_4)
                self.cmbOptionFindChucNang.setGeometry(QtCore.QRect(90, 10, 101, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.cmbOptionFindChucNang.setFont(font)
                self.cmbOptionFindChucNang.setObjectName("cmbOptionFindChucNang")
                self.cmbOptionFindChucNang.addItem("Mã chức năng", "machucnang")
                self.cmbOptionFindChucNang.addItem("Tên chức năng", "tenchucnang")
                self.cmbOptionFindChucNang.currentIndexChanged.connect(self.findChucNang)
                self.txtFindChucNang = QtWidgets.QLineEdit(parent=self.frame_4)
                self.txtFindChucNang.setGeometry(QtCore.QRect(200, 10, 151, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.txtFindChucNang.setFont(font)
                self.txtFindChucNang.setText("")
                self.txtFindChucNang.setObjectName("txtFindChucNang")
                self.txtFindChucNang.textChanged.connect(self.findChucNang)
                self.label_22 = QtWidgets.QLabel(parent=self.frmClass)
                self.label_22.setGeometry(QtCore.QRect(20, 90, 91, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.label_22.setFont(font)
                self.label_22.setAlignment(QtCore.Qt.AlignmentFlag.AlignBottom|QtCore.Qt.AlignmentFlag.AlignLeading|QtCore.Qt.AlignmentFlag.AlignLeft)
                self.label_22.setObjectName("label_22")
                self.txtTenChucNang = QtWidgets.QLineEdit(parent=self.frmClass)
                self.txtTenChucNang.setGeometry(QtCore.QRect(20, 120, 151, 21))
                font = QtGui.QFont()
                font.setPointSize(9)
                self.txtTenChucNang.setFont(font)
                self.txtTenChucNang.setText("")
                self.txtTenChucNang.setObjectName("txtTenChucNang")
                self.horizontalLayoutWidget_4 = QtWidgets.QWidget(parent=self.frmClass)
                self.horizontalLayoutWidget_4.setGeometry(QtCore.QRect(20, 190, 151, 31))
                self.horizontalLayoutWidget_4.setObjectName("horizontalLayoutWidget_4")
                self.horizontalLayout_5 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_4)
                self.horizontalLayout_5.setContentsMargins(0, 0, 0, 0)
                self.horizontalLayout_5.setObjectName("horizontalLayout_5")
                self.btnXoaChucNang = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_4)
                self.btnXoaChucNang.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnXoaChucNang.setStyleSheet("#btnXoaChucNang{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnXoaChucNang:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnXoaChucNang.setObjectName("btnXoaChucNang")
                self.btnXoaChucNang.clicked.connect(self.deleteChucNang)
                self.horizontalLayout_5.addWidget(self.btnXoaChucNang)
                self.btnLamMoiChucNang = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_4)
                self.btnLamMoiChucNang.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnLamMoiChucNang.setStyleSheet("#btnLamMoiChucNang{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnLamMoiChucNang:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnLamMoiChucNang.setObjectName("btnLamMoiChucNang")
                self.btnLamMoiChucNang.clicked.connect(self.clearChucNang)
                self.horizontalLayout_5.addWidget(self.btnLamMoiChucNang)
                self.tbwChucNang = QtWidgets.QTableWidget(parent=self.frmClass)
                self.tbwChucNang.setGeometry(QtCore.QRect(180, 90, 191, 131))
                self.tbwChucNang.setObjectName("tbwChucNang")
                self.tbwChucNang.setColumnCount(2)
                self.tbwChucNang.setRowCount(0)
                item = QtWidgets.QTableWidgetItem()
                self.tbwChucNang.setHorizontalHeaderItem(0, item)
                item = QtWidgets.QTableWidgetItem()
                self.tbwChucNang.setHorizontalHeaderItem(1, item)
                self.tbwChucNang.setEditTriggers(QtWidgets.QTableWidget.EditTrigger.NoEditTriggers)
                self.tbwChucNang.itemClicked.connect(self.getDataRowChucNang)   
                self.horizontalLayoutWidget_5 = QtWidgets.QWidget(parent=self.frmClass)
                self.horizontalLayoutWidget_5.setGeometry(QtCore.QRect(20, 160, 151, 31))
                self.horizontalLayoutWidget_5.setObjectName("horizontalLayoutWidget_5")
                self.horizontalLayout_6 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_5)
                self.horizontalLayout_6.setContentsMargins(0, 0, 0, 0)
                self.horizontalLayout_6.setObjectName("horizontalLayout_6")
                self.btnThemChucNang = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_5)
                self.btnThemChucNang.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnThemChucNang.setStyleSheet("#btnThemChucNang{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnThemChucNang:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnThemChucNang.setObjectName("btnThemChucNang")
                self.btnThemChucNang.clicked.connect(self.addChucNang)
                self.horizontalLayout_6.addWidget(self.btnThemChucNang)
                self.btnSuaChucNang = QtWidgets.QPushButton(parent=self.horizontalLayoutWidget_5)
                self.btnSuaChucNang.setCursor(QtGui.QCursor(QtCore.Qt.CursorShape.PointingHandCursor))
                self.btnSuaChucNang.setStyleSheet("#btnSuaChucNang{\n"
        "background-color:qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(69, 127, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "color:white;\n"
        "font-weight:bold;\n"
        "border-radius:3px;\n"
        "padding: 5px;\n"
        "}\n"
        "#btnSuaChucNang:hover{\n"
        "background-color: qlineargradient(spread:pad, x1:0, y1:0, x2:1, y2:0, stop:0 rgba(107, 149, 202, 255), stop:1 rgba(86, 145, 200, 255));\n"
        "}")
                self.btnSuaChucNang.setObjectName("btnSuaChucNang")
                self.btnSuaChucNang.clicked.connect(self.updateChucNang)
                self.horizontalLayout_6.addWidget(self.btnSuaChucNang)
                self.verticalLayout.addWidget(self.frmClass)
                self.horizontalLayout.addWidget(self.frmMain_2)
                MainWindow.setCentralWidget(self.centralwidget)

                self.loadDataQTableTaiKhoan()
                self.loadDataQTableChucNang()
                self.loadDataQTableQuyen()
                self.retranslateUi(MainWindow)
                # tạo timer
                self.timer = QtCore.QTimer()
                self.timer.timeout.connect(self.clock_number)
                # start and update every second
                self.timer.start(1000)
                self.clock_number()
                QtCore.QMetaObject.connectSlotsByName(MainWindow)

        def retranslateUi(self, MainWindow):
                _translate = QtCore.QCoreApplication.translate
                MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
                self.label_20.setText(_translate("MainWindow", "Phần mềm điểm danh sinh viên"))
                self.label_3.setText(_translate("MainWindow", "Quản lý tài khoản"))
                self.btnBack.setText(_translate("MainWindow", "Trở về"))
                self.btnThemTaiKhoan.setText(_translate("MainWindow", "Thêm"))
                self.btnSuaTaiKhoan.setText(_translate("MainWindow", "Sửa"))
                self.btnXoaTaiKhoan.setText(_translate("MainWindow", "Xóa"))
                self.btnLamMoiTaiKhoan.setText(_translate("MainWindow", "Làm mới"))
                item = self.tbwTaiKhoan.horizontalHeaderItem(0)
                item.setText(_translate("MainWindow", "Mã tài khoản"))
                item = self.tbwTaiKhoan.horizontalHeaderItem(1)
                item.setText(_translate("MainWindow", "Email"))
                item = self.tbwTaiKhoan.horizontalHeaderItem(2)
                item.setText(_translate("MainWindow", "Quyền"))
                self.label_14.setText(_translate("MainWindow", "Quyền"))
                self.label_10.setText(_translate("MainWindow", "Email"))           
                self.label_8.setText(_translate("MainWindow", "Thông tin tài khoản"))
                self.label_23.setText(_translate("MainWindow", "Hệ thống tìm kiếm:"))
                self.label_24.setText(_translate("MainWindow", "Tìm kiếm theo:"))
                self.cmbOptionFindTaiKhoan.setItemText(0, _translate("MainWindow", "Mã tài khoản"))
                item = self.tbwQuyen.horizontalHeaderItem(0)
                item.setText(_translate("MainWindow", "Mã quyền"))
                item = self.tbwQuyen.horizontalHeaderItem(1)
                item.setText(_translate("MainWindow", "Tên quyền"))
                self.label_25.setText(_translate("MainWindow", "Tìm kiếm theo:"))
                self.cmbOptionFindQuyen.setItemText(0, _translate("MainWindow", "Mã quyền"))
                self.label_26.setText(_translate("MainWindow", "Quản lý quyền"))
                self.label_27.setText(_translate("MainWindow", "Tên quyền"))
                self.btnThemQuyen.setText(_translate("MainWindow", "Thêm"))
                self.btnSuaQuyen.setText(_translate("MainWindow", "Sửa"))
                self.btnXoaQuyen.setText(_translate("MainWindow", "Xóa"))
                self.btnLamMoiQuyen.setText(_translate("MainWindow", "Làm mới"))
                self.btnChonChucNang.setText(_translate("MainWindow", "Chọn chức năng"))
                self.label_19.setText(_translate("MainWindow", "Quản lý chức năng"))
                self.label_21.setText(_translate("MainWindow", "Tìm kiếm theo:"))
                self.cmbOptionFindChucNang.setItemText(0, _translate("MainWindow", "Mã chức năng"))
                self.label_22.setText(_translate("MainWindow", "Tên chức năng"))
                self.btnXoaChucNang.setText(_translate("MainWindow", "Xóa"))
                self.btnLamMoiChucNang.setText(_translate("MainWindow", "Làm mới"))
                item = self.tbwChucNang.horizontalHeaderItem(0)
                item.setText(_translate("MainWindow", "Mã chức năng"))
                item = self.tbwChucNang.horizontalHeaderItem(1)
                item.setText(_translate("MainWindow", "Tên chức năng"))
                self.btnThemChucNang.setText(_translate("MainWindow", "Thêm"))
                self.btnSuaChucNang.setText(_translate("MainWindow", "Sửa"))
        def loadDataQTableChucNang(self):                    
                cn = ChucNangBUS()
                list = cn.get()
                tablerow=0
                self.tbwChucNang.setRowCount(list.__len__())             
                if list is not None:
                        for row in list:
                                self.tbwChucNang.setItem(tablerow, 0, QtWidgets.QTableWidgetItem(row[0]))
                                self.tbwChucNang.setItem(tablerow, 1, QtWidgets.QTableWidgetItem(row[1]))                                                       
                                tablerow+=1       
        def getDataRowChucNang(self):
                cr = self.tbwChucNang.currentRow()
                self.macn = self.tbwChucNang.item(cr,0).text()
                self.txtTenChucNang.setText(self.tbwChucNang.item(cr,1).text())
        def clearChucNang(self):
                self.txtTenChucNang.clear()
        def addChucNang(self):
                cnBUS = ChucNangBUS()
                machucnang = cnBUS.generateID()
                tenchucnang = self.txtTenChucNang.text()
                
                cn = ChucNang(machucnang, tenchucnang)
                if self.validateCN(cn):
                        if(cnBUS.add(cn)):
                                QMessageBox.information(self.centralwidget,"Thông báo","Thêm thành công")
                                self.loadDataQTableChucNang()
                                self.clearChucNang()
                        else:
                                QMessageBox.information(self.centralwidget,"Thông báo","Thêm thất bại")
        def updateChucNang(self):
                cnBUS = ChucNangBUS()
                machucnang = self.macn
                tenchucnang = self.txtTenChucNang.text()
                
                cn = ChucNang(machucnang, tenchucnang)
                if self.validateCN(cn):
                        if(cnBUS.update(cn)):
                                QMessageBox.information(self.centralwidget,"Thông báo","Cập nhật thành công")
                                self.loadDataQTableChucNang()
                        else:
                                QMessageBox.information(self.centralwidget,"Thông báo","Cập nhật thất bại")
        def deleteChucNang(self):
                cnBUS = ChucNangBUS()
                if(cnBUS.delete(self.macn)):
                        QMessageBox.information(self.centralwidget,"Thông báo","Xóa thành công")
                        self.loadDataQTableChucNang()
                        self.clearChucNang()
                else:
                        QMessageBox.information(self.centralwidget,"Thông báo","Xóa thất bại")
        def findChucNang(self):
                cn = ChucNangBUS()
                key =  self.cmbOptionFindChucNang.currentData()
                value = self.txtFindChucNang.text()
                list = cn.find(key, value)
                tablerow=0
                self.tbwChucNang.setRowCount(list.__len__())
             
                if list is not None:
                        for row in list:
                                self.tbwChucNang.setItem(tablerow, 0, QtWidgets.QTableWidgetItem(row[0]))
                                self.tbwChucNang.setItem(tablerow, 1, QtWidgets.QTableWidgetItem(row[1]))                      
                                tablerow+=1

        def loadDataQTableQuyen(self):                    
                q = QuyenBUS()
                list = q.get()
                tablerow=0
                self.tbwQuyen.setRowCount(list.__len__())             
                if list is not None:
                        for row in list:
                                self.tbwQuyen.setItem(tablerow, 0, QtWidgets.QTableWidgetItem(row[0]))
                                self.tbwQuyen.setItem(tablerow, 1, QtWidgets.QTableWidgetItem(row[1]))                        
                                tablerow+=1
        
        def getDataRowQuyen(self):
                cr = self.tbwQuyen.currentRow()
                self.maquyen = self.tbwQuyen.item(cr,0).text()
                self.txtTenQuyen.setText(self.tbwQuyen.item(cr,1).text())

        def clearQuyen(self):
                self.txtTenQuyen.clear()

        def addQuyen(self):
                qBUS = QuyenBUS()
                maquyen = qBUS.generateID()
                tenquyen = self.txtTenQuyen.text()
                
                q = Quyen(maquyen, tenquyen)
                if self.validateQuyen(q):
                        if(qBUS.add(q)):
                                QMessageBox.information(self.centralwidget,"Thông báo","Thêm thành công")
                                self.loadDataQTableQuyen()
                                self.clearQuyen()
                        else:
                                QMessageBox.information(self.centralwidget,"Thông báo","Thêm thất bại")

        def updateQuyen(self):
                qBUS = QuyenBUS()
                maquyen = self.maquyen
                tenquyen = self.txtTenQuyen.text()
                
                q = Quyen(maquyen, tenquyen)
                if self.validateQuyen(q):
                        if(qBUS.update(q)):
                                QMessageBox.information(self.centralwidget,"Thông báo","Cập nhật thành công")
                                self.loadDataQTableQuyen()
                        else:
                                QMessageBox.information(self.centralwidget,"Thông báo","Cập nhật thất bại")
        def deleteQuyen(self):
                qBUS = QuyenBUS()
                if(qBUS.delete(self.maquyen)):
                        QMessageBox.information(self.centralwidget,"Thông báo","Xóa thành công")
                        self.loadDataQTableQuyen()
                        self.clearQuyen()
                else:
                        QMessageBox.information(self.centralwidget,"Thông báo","Xóa thất bại")
        def findQuyen(self):
                q = QuyenBUS()
                key =  self.cmbOptionFindQuyen.currentData()
                value = self.txtFindQuyen.text()
                list = q.find(key, value)
                tablerow=0
                self.tbwQuyen.setRowCount(list.__len__())
             
                if list is not None:
                        for row in list:
                                self.tbwQuyen.setItem(tablerow, 0, QtWidgets.QTableWidgetItem(row[0]))
                                self.tbwQuyen.setItem(tablerow, 1, QtWidgets.QTableWidgetItem(row[1]))                      
                                tablerow+=1
        def loadListCmbQuyen(self):
                q = QuyenBUS()
                list = q.get()          
                if list is not None:
                        for row in list:
                                self.cmbQuyen.addItem(row[1],row[0])      

        def loadDataQTableTaiKhoan(self):                    
                tk = TaiKhoanBUS()
                list = tk.get()
                tablerow=0
                self.tbwTaiKhoan.setRowCount(list.__len__())             
                if list is not None:
                        for row in list:
                                self.tbwTaiKhoan.setItem(tablerow, 0, QtWidgets.QTableWidgetItem(row[0]))
                                self.tbwTaiKhoan.setItem(tablerow, 1, QtWidgets.QTableWidgetItem(row[1]))
                                self.tbwTaiKhoan.setItem(tablerow, 2, QtWidgets.QTableWidgetItem(row[3]))                             
                                tablerow+=1
        
        def getDataRowTaiKhoan(self):
                cr = self.tbwTaiKhoan.currentRow()
                self.mataikhoan = self.tbwTaiKhoan.item(cr,0).text()
                self.txtEmail.setText(self.tbwTaiKhoan.item(cr,1).text())
                # LẤY TÊN QUYỀN SET COMBOBOX
                qBUS = QuyenBUS()
                dstenquyen = qBUS.find('maquyen',self.tbwTaiKhoan.item(cr,2).text())
                if dstenquyen is not None:
                        for row in dstenquyen:
                                maquyen = row[1]
                self.cmbQuyen.setCurrentText(maquyen)
               


        def clearTaiKhoan(self):
                self.txtEmail.clear()
                self.cmbQuyen.setCurrentIndex(0)

        def addTaiKhoan(self):
                tkBUS = TaiKhoanBUS()
                mataikhoan = tkBUS.generateID()
                email = self.txtEmail.text()
                matkhau = '12345678'
                quyen = self.cmbQuyen.currentData()
                
                ktraEmail = tkBUS.find('email', email)
                if ktraEmail is None:
                        QMessageBox.information(self.centralwidget,"Thông báo","Email đã tồn tại")
                else:
                        tk = TaiKhoan(mataikhoan, email, matkhau,quyen)
                        if self.validateTK(tk):
                                if(tkBUS.add(tk)):
                                        QMessageBox.information(self.centralwidget,"Thông báo","Thêm thành công")
                                        self.loadDataQTableTaiKhoan()
                                        self.clearTaiKhoan()
                                else:
                                        QMessageBox.information(self.centralwidget,"Thông báo","Thêm thất bại")

        def updateTaiKhoan(self):
                tkBUS = TaiKhoanBUS()
                mataikhoan = self.mataikhoan
                email = self.txtEmail.text()
                matkhau=''
                quyen = self.cmbQuyen.currentData()
                
                tk = TaiKhoan(mataikhoan, email, matkhau, quyen)
                if self.validateTK(tk):
                        if(tkBUS.update(tk)):
                                QMessageBox.information(self.centralwidget,"Thông báo","Cập nhật thành công")
                                self.loadDataQTableTaiKhoan()
                        else:
                                QMessageBox.information(self.centralwidget,"Thông báo","Cập nhật thất bại")
        def deleteTaiKhoan(self):
                tkBUS = TaiKhoanBUS()
                if(tkBUS.delete(self.mataikhoan)):
                        QMessageBox.information(self.centralwidget,"Thông báo","Xóa thành công")
                        self.loadDataQTableTaiKhoan()
                        self.clearTaiKhoan()
                else:
                        QMessageBox.information(self.centralwidget,"Thông báo","Xóa thất bại")
        def findTaiKhoan(self):   
                tk = TaiKhoanBUS()
                key =  self.cmbOptionFindTaiKhoan.currentData()
                value = self.txtFindTaiKhoan.text()
                list = tk.find(key, value)
                tablerow=0
                self.tbwTaiKhoan.setRowCount(list.__len__())
             
                if list is not None:
                        for row in list:
                                self.tbwTaiKhoan.setItem(tablerow, 0, QtWidgets.QTableWidgetItem(row[0]))
                                self.tbwTaiKhoan.setItem(tablerow, 1, QtWidgets.QTableWidgetItem(row[1]))                      
                                self.tbwTaiKhoan.setItem(tablerow, 2, QtWidgets.QTableWidgetItem(row[3]))
                                tablerow+=1    
        def updateNewChucNangForQuyen(self):
                self.add = True
                self.statusAdd = False
                qcnBUS = Quyen_ChucNangBUS()
                listcnmacdinh = qcnBUS.getListChucNangTheoQuyen(self.maquyen)     
                
                listcnmoi = self.ui.getListChucNangChecked()
                if listcnmoi != listcnmacdinh:
                        self.statusAdd = True
                        if qcnBUS.delete(self.maquyen):
                                for cn in listcnmoi:
                                        qcn = Quyen_ChucNang(self.maquyen,cn)
                                        if qcnBUS.add(qcn)== False:
                                                self.add = False
                if self.statusAdd:
                        if self.add:
                                QMessageBox.information(self.centralwidget,"Thông báo","Chọn chức năng thành công")
                        else:
                                QMessageBox.information(self.centralwidget,"Thông báo","Chọn chức năng thất bại")

        def openDialogListChucNang(self, maquyen):                   
                self.Dialog = QtWidgets.QDialog()
                self.ui = DialogListChucNang.Ui_Dialog(maquyen)   
                self.ui.setupUi(self.Dialog)                            
                self.Dialog.show()

                rsp = self.Dialog.exec()
                if rsp == 1:
                        self.updateNewChucNangForQuyen()
        def validateTK(self, tk: TaiKhoan):        
                if tk._email == '':
                        QMessageBox.information(self.centralwidget,"Thông báo","Vui lòng nhập đầy đủ thông tin")
                        return False
                if check_error.check_email(self, input=tk._email) == False:
                        QMessageBox.information(self.centralwidget,"Thông báo","Vui lòng nhập email đúng định dạng")
                        return False
                return True
        def validateQuyen(self, q: Quyen):        
                if q._tenquyen == '':
                        QMessageBox.information(self.centralwidget,"Thông báo","Vui lòng nhập đầy đủ thông tin")
                        return False
                return True
        def validateCN(self, cn: ChucNang):        
                if cn._tenchucnang == '':
                        QMessageBox.information(self.centralwidget,"Thông báo","Vui lòng nhập đầy đủ thông tin")
                        return False
                return True
        
        def clock_number(self):
                time = datetime.now()
                format_time = time.strftime("%H:%M:%S")
                self.label_2.setText(format_time)

                format_date = time.strftime("%d/%m/%Y")
                self.label_4.setText(format_date)
        

if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = UI_QuanLyTaiKhoan()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec())

